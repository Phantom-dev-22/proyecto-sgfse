{% extends 'base.html' %}

{% block content %}

<style>
    /* Tarjetas de Estadísticas */
    .stat-card {
        border: none;
        border-radius: 15px;
        color: white; 
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        overflow: hidden;
        position: relative;
        box-shadow: 0 .5rem 1rem var(--shadow);
    }
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 1rem 2rem var(--shadow);
    }
    .stat-card .icon-bg {
        position: absolute;
        right: -10px;
        bottom: -10px;
        font-size: 5rem;
        opacity: 0.2;
        transform: rotate(-15deg);
    }

    /* Gradientes */
    .bg-gradient-primary { background: linear-gradient(45deg, #4e73df, #224abe); }
    .bg-gradient-success { background: linear-gradient(45deg, #1cc88a, #13855c); }
    .bg-gradient-info    { background: linear-gradient(45deg, #36b9cc, #258391); }
    .bg-gradient-warning { background: linear-gradient(45deg, #f6c23e, #dda20a); }

    /* Tarjetas de Navegación */
    .nav-card {
        background-color: var(--card-bg);
        border: none;
        border-radius: 15px;
        box-shadow: var(--shadow);
        transition: all 0.3s ease;
        color: var(--text-color); 
    }
    .nav-card:hover {
        border-left: 5px solid #4e73df;
        transform: translateX(5px);
        background-color: var(--card-bg);
    }
    .nav-card h4, .nav-card h6, .nav-card p, .nav-card small, .nav-card i {
        color: var(--text-color);
    }
    /* Excepciones de color */
    .nav-card .text-primary { color: #4e73df !important; }
    .nav-card .text-success { color: #1cc88a !important; }
    .nav-card .text-secondary { color: #858796 !important; }
    
</style>

<div class="container py-4">

    <div class="d-flex justify-content-between align-items-center mb-5">
        <div>
            <h2 class="fw-bold mb-0">Panel de Control</h2>
            <p class="mb-0 opacity-75" id="fecha-actual">Cargando fecha...</p>
        </div>
        
        <a href="{{ url_for('logout') }}" class="btn btn-danger fw-bold rounded-pill px-4 shadow-sm">
            <i class="bi bi-box-arrow-right me-2"></i> Cerrar Sesión
        </a>
    </div>

    <div class="row g-4 mb-5">
        <div class="col-xl-3 col-md-6">
            <div class="card stat-card bg-gradient-primary h-100 py-3">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-uppercase mb-1 opacity-75 fw-bold" style="font-size: 0.8rem;">Total Alumnos</div>
                            <div class="h1 mb-0 fw-bold">{{ total_alumnos }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="bi bi-backpack-fill icon-bg"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="card stat-card bg-gradient-success h-100 py-3">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-uppercase mb-1 opacity-75 fw-bold" style="font-size: 0.8rem;">Usuarios Sistema</div>
                            <div class="h1 mb-0 fw-bold">{{ total_usuarios }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="bi bi-person-badge-fill icon-bg"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="card stat-card bg-gradient-info h-100 py-3">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-uppercase mb-1 opacity-75 fw-bold" style="font-size: 0.8rem;">Cursos Activos</div>
                            <div class="h1 mb-0 fw-bold">10</div>
                        </div>
                        <div class="col-auto">
                            <i class="bi bi-easel-fill icon-bg"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="card stat-card bg-gradient-warning h-100 py-3">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-uppercase mb-1 opacity-75 fw-bold" style="font-size: 0.8rem;">Estado Sistema</div>
                            <div class="h3 mb-0 fw-bold">En Línea <i class="bi bi-wifi ms-1"></i></div>
                        </div>
                        <div class="col-auto">
                            <i class="bi bi-hdd-rack-fill icon-bg"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <h5 class="fw-bold mb-4 opacity-75"><i class="bi bi-grid me-2"></i>Accesos Rápidos</h5>
    
    <div class="row g-4">
        <div class="col-md-6">
            <a href="{{ url_for('gestion_usuarios') }}" class="text-decoration-none">
                <div class="card nav-card h-100 p-4 d-flex flex-row align-items-center gap-4">
                    <div class="bg-primary bg-opacity-10 p-3 rounded-circle text-primary display-6">
                        <i class="bi bi-people-fill"></i>
                    </div>
                    <div>
                        <h4 class="fw-bold mb-1">Gestión de Usuarios</h4>
                        <p class="mb-0 small opacity-75">Administrar matrículas, alumnos y apoderados.</p>
                    </div>
                    <i class="bi bi-chevron-right ms-auto opacity-50"></i>
                </div>
            </a>
        </div>

        <div class="col-md-6">
            <a href="{{ url_for('asistencia') }}" class="text-decoration-none">
                <div class="card nav-card h-100 p-4 d-flex flex-row align-items-center gap-4">
                    <div class="bg-success bg-opacity-10 p-3 rounded-circle text-success display-6">
                        <i class="bi bi-calendar-check-fill"></i>
                    </div>
                    <div>
                        <h4 class="fw-bold mb-1">Control de Asistencia</h4>
                        <p class="mb-0 small opacity-75">Pasar lista diaria y generar reportes PDF.</p>
                    </div>
                    <i class="bi bi-chevron-right ms-auto opacity-50"></i>
                </div>
            </a>
        </div>

        <div class="col-md-12">
            <div class="card nav-card h-100 p-3 opacity-50" style="cursor: not-allowed;">
                <div class="d-flex flex-row align-items-center gap-3">
                    <div class="bg-secondary bg-opacity-10 p-2 rounded-circle text-secondary fs-4">
                        <i class="bi bi-gear-fill"></i>
                    </div>
                    <div>
                        <h6 class="fw-bold mb-0">Configuración General</h6>
                        <small class="opacity-75">Ajustes del colegio (En desarrollo)</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const opciones = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    const fecha = new Date().toLocaleDateString('es-ES', opciones);
    document.getElementById('fecha-actual').textContent = fecha.charAt(0).toUpperCase() + fecha.slice(1);
</script>

{% endblock %}